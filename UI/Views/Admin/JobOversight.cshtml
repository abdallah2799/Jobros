@model UI.Models.Admin.JobOversightViewModel

@{
    ViewData["Title"] = "Job Oversight";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="container my-5">

    <h2 class="text-center mb-5 fw-bold" style="color: #00B074;">
        &#x1F4BC; Job Oversight
    </h2>

    <!-- Success/Error Messages -->
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success text-center">@TempData["SuccessMessage"]</div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger text-center">@TempData["ErrorMessage"]</div>
    }

    <!-- Filters -->
    <div class="card shadow-sm mb-5 p-4" style="border-radius: 25px; border: 2px solid #ccc;">
        <div class="card-header d-flex align-items-center"
             style="background: linear-gradient(45deg, #00B074, #00B074); border-radius: 25px 25px 0 0; padding: 1rem 2rem; margin: -1rem -1rem 1.5rem -1rem;">
            <i class="fas fa-filter fa-lg me-2" style="color: black;"></i>
            <h4 class="mb-0 fw-bold" style="color: black;">Filters</h4>
        </div>

        <form asp-action="JobOversight" method="get">
            <div class="row g-3">
                <div class="col-md-4">
                    <label for="selectedEmployerId" class="form-label fw-semibold">Filter by Employer</label>
                    <select name="selectedEmployerId" asp-for="SelectedEmployerId" asp-items="@Model.EmployerList" class="form-select form-input">
                        <option value="">All Employers</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="isActiveFilter" class="form-label fw-semibold">Filter by Status</label>
                    <select name="isActiveFilter" asp-for="IsActiveFilter" class="form-select form-input">
                        <option value="">All Statuses</option>
                        <option value="true">Active</option>
                        <option value="false">Inactive</option>
                    </select>
                </div>
                <div class="col-md-4 d-flex align-items-end gap-2">
                    <button type="submit" class="btn btn-lg w-100"
                            style="background: linear-gradient(45deg, #00B074, #00B074);
                                   border: 2px solid #00B074;
                                   color: white;
                                   border-radius: 15px;
                                   font-weight: 600;">
                        Filter
                    </button>
                    <a asp-action="JobOversight" class="btn btn-lg w-100"
                       style="background: linear-gradient(45deg, #FFC107, #FFC107);
                              border: 2px solid #FFC107;
                              color: black;
                              border-radius: 15px;
                              font-weight: 600;">
                        Clear
                    </a>
                </div>
            </div>
        </form>
    </div>

    <!-- Jobs Cards -->
    <div class="row g-4">
        @foreach (var job in Model.Jobs)
        {
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 shadow-sm p-4"
                     style="border-radius: 25px;
                                border: 2px solid #ccc;
                                transition: transform 0.2s;"
                     onmouseover="this.style.transform='scale(1.03)';"
                     onmouseout="this.style.transform='scale(1)';">

                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <h5 class="card-title mb-0 fw-bold">@job.Title</h5>
                        @if (job.IsActive)
                        {
                            <span class="badge" style="background-color: #00B074;">Active</span>
                        }
                        else
                        {
                            <span class="badge bg-secondary">Inactive</span>
                        }
                    </div>

                    <p class="text-muted mb-2"><strong>Company:</strong> @job.CompanyName</p>
                    <p class="text-muted mb-3"><strong>Created At:</strong> @job.CreatedAt.ToShortDateString()</p>

                    <form asp-action="DeleteJob" asp-route-id="@job.Id" method="post">
                        @Html.AntiForgeryToken()
                        <button type="submit" class="btn btn-lg w-100"
                                style="background: linear-gradient(45deg, #dc3545, #dc3545);
                                           border: 2px solid #dc3545;
                                           color: white;
                                           border-radius: 15px;
                                           font-weight: 600;"
                                onclick="return confirm('Are you sure you want to delete this job?')">
                            Delete
                        </button>
                    </form>
                </div>
            </div>
        }
    </div>
</div>